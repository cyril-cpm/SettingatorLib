<textarea id="log" name="log" rows="20" cols="120"></textarea>
<input type="range" min="1" max="100" value="50" class="slider" id="myRange">
<p>wazaaabi</p>
<script>

    let log = document.getElementById("log");

    function logText(text) {
        log.textContent += text + "\n";
    }
    
    function logHex(buff) {
        for (i = 0; i < buff.length; i++) {
            if (buff[i] < 16)
                log.textContent += 0;
            log.textContent += buff[i].toString(16);
            log.textContent += " ";
        }
        log.textContent += "\n";
    }

    webSocket = new WebSocket("ws://192.168.0.1:8081/settingator", "settingator");
    webSocket.binaryType = "arraybuffer";

    function sendInitRequest() {
        let initRequest = new Uint8Array([ 0xFF, 0x00, 0x06, 0x12, 0x00, 0x00]);
        webSocket.send(initRequest);
        logText("Init request sent...");
        logHex(initRequest);
    }

    function treatMessage(message) {
        let view = new Uint8Array(message);
        logHex(view);
    }

    webSocket.onopen = function (event) {
        logText("onOpen");

        sendInitRequest();
    }

    webSocket.onclose = function (event) {
        logText("onClose " + event.code + " " + event.reason);
    }

    webSocket.onmessage = function (event) {
        logText("onMessage");

        treatMessage(event.data);
    }

    webSocket.onerror = function (event) {
        logText("onError");
    }
    


</script>